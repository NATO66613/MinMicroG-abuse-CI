# Scheduled workflow

name: cron

on:
  issues:
    types: [ opened, reopened ]
  schedule:
    - cron: '0 0 * * *'
  workflow_dispatch:

jobs:
  cron:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger workflow
        env:
          # Stupid Github doesn't allow triggering recursive workflows with the ephemeral automatic token
          ACTIONS_TOKEN: ${{ secrets.PAT }}
        run: |
          auth="Authorization: token $ACTIONS_TOKEN"
          curl --data '{ "ref": "hub" }' -H "$auth" "https://api.github.com/repos/FriendlyNeighborhoodShane/MinMicroG-abuse-CI/actions/workflows/run.yml/dispatches"
